<h2 class="title">Мнемосхема процесса производства</h2>

<div class="globalWrapper">
    {{#states: id}}
    {{#if type == "mainStorage"}}
        <div class="mainStorage">
            <br><br><br><br>
                <h5>Выдача со<br>склада<br></h5>
                <i class="fa fa-3x fa-cogs" style="color: #b3b3b3;"></i>
        </div>
    {{/if}}
    {{#if type == "operation"}}
        <div class="workPlaceItem">

            {{#services: i}}
                {{#if i<7}}
                    {{#if status =='plan'}}
                        <div class="circle greenCircle" data-title="{{title}}"><i class="fa fa-3x fa-check-circle"></i></div>
                    {{/if}}
                    {{#if status =='delay'}}
                        <div class="circle yellowCircle" data-title="{{title}}"><i class="fa fa-3x fa-exclamation-circle"></i></div>
                    {{/if}}
                    {{#if status =='losses'}}
                        <div class="circle redCircle" data-title="{{title}}"><i class="fa fa-3x fa-times-circle"></i></div>
                    {{/if}}
                    {{#if status =='default'}}
                        <div class="circle defaultCircle" data-title="{{title}}"><i class="fa fa-3x fa-circle-o"></i></div>
                    {{/if}}
                {{/if}}
            {{/services}}

            <div class="wrapper {{#if status =='plan'}}green{{/if}}
                {{#if status =='delay'}}yellow{{/if}}
                {{#if status =='losses'}}red{{/if}}">
                <a href="#currentItem/{{id}}"  class="titleForWorkPlace"><h5>{{title}}</h5></a>
                <div class="leftTimeLineWorkPlace">
                    <p>
                        {{#if details.planTime[0].start.time}}
                            {{details.planTime[0].start.time}}
                        {{else}}
                            hh:mm
                        {{/if}}
                    </p>
                </div>
                <div class="leftStorage operationWorkPlace
                    {{#if services[7].status =='plan'}}
                        storageGreen
                    {{/if}}
                    {{#if services[7].status =='delay'}}
                        storageYellow
                    {{/if}}
                    {{#if services[7].status =='losses'}}
                        storageRed
                    {{/if}}
                    {{#if services[7].status =='default'}}
                        storageGreen
                    {{/if}}
                ">
                    <br>
                    <br>
                    Входной склад заготовок<br><i class="fa fa-2x fa-cogs" style="color: #b3b3b3;"></i>
                </div>
                <div class="defect
                    {{#if services[11].status =='plan'}}
                        defectGreen
                    {{/if}}
                    {{#if services[11].status =='delay'}}
                        defectYellow
                    {{/if}}
                    {{#if services[11].status =='losses'}}
                        defectRed
                    {{/if}}
                ">Брак:<h3>0</h3></div>
                <div class="rightStorage operationWorkPlace
                    {{#if services[13].status =='plan'}}
                        storageGreen
                    {{/if}}
                    {{#if services[13].status =='delay'}}
                        storageYellow
                    {{/if}}
                    {{#if services[13].status =='losses'}}
                        storageRed
                    {{/if}}
                    {{#if services[13].status =='default'}}
                        storageGreen
                    {{/if}}
                ">
                    <br>
                    <br>
                    Выходной склад деталей<br><i class="fa fa-2x fa-cogs" style="color: #b3b3b3;"></i>
                </div>
                <div class="rightTimeLineWorkPlace">
                    <p>
                        {{#if details.planTime[0].finish.time}}
                            {{details.planTime[0].finish.time}}
                        {{else}}
                            hh:mm
                        {{/if}}
                    </p>
                </div>
            </div>
            {{#services: i}}
                {{#if i>=7}}
                    {{#if status =='plan'}}
                        <div class="circle greenCircle" data-title="{{title}}"><i class="fa fa-3x fa-check-circle"></i></div>
                    {{/if}}
                    {{#if status =='delay'}}
                        <div class="circle yellowCircle" data-title="{{title}}"><i class="fa fa-3x fa-exclamation-circle"></i></div>
                    {{/if}}
                    {{#if status =='losses'}}
                        <div class="circle redCircle" data-title="{{title}}"><i class="fa fa-3x fa-times-circle"></i></div>
                    {{/if}}
                    {{#if status =='default'}}
                        <div class="circle defaultCircle" data-title="{{title}}"><i class="fa fa-3x fa-circle-o"></i></div>
                    {{/if}}
                {{/if}}
            {{/services}}
        </div>
    {{/if}}
    {{#if type == "transportation"}}
        <div class="transportation {{#if status =='plan'}}arrowGreen{{/if}}
            {{#if status =='delay'}}arrowYellow{{/if}}
            {{#if status =='losses'}}arrowRed{{/if}}">
            <div class="leftTimeLineTransportation">
                <p>
                    {{#if details.planTime[0].start.time}}
                    {{details.planTime[0].start.time}}
                    {{else}}
                    hh:mm
                    {{/if}}
                </p>
            </div>
            <br><br><a href="#currentItem/{{id}}">{{title}}</a>
            <div class="rightTimeLineTransportation">
                <p>
                    {{#if details.planTime[0].finish.time}}
                    {{details.planTime[0].finish.time}}
                    {{else}}
                    hh:mm
                    {{/if}}
                </p>
            </div>
        </div>
    {{/if}}
    {{/states}}
    <div class="resultBlock"></div>
</div>
<div class="timeArrowPlan"><hr size="3" /><p>плановое время</p></div>
<br>

<div class="timeArrowFact"><hr size="3" /><p>фактическое время</p></div>